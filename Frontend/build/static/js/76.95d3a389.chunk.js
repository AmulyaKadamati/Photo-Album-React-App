"use strict";(self.webpackChunkmantis_free_react_admin_template=self.webpackChunkmantis_free_react_admin_template||[]).push([[76],{35352:function(t,e,r){r.d(e,{P5:function(){return s},Pq:function(){return p},T1:function(){return m},eE:function(){return d},kC:function(){return l},p:function(){return f},q7:function(){return u},tX:function(){return h}});var n=r(59121),o=r(15861),a=r(3902),c={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:8080",i="/api/v1",s=function(t,e){var r="".concat(c).concat(i).concat(t);return a.Z.post(r,e).catch((function(t){throw console.error("Error fetching data from url:",r),t}))},u=function(t,e){var r=localStorage.getItem("token"),n="".concat(c).concat(i).concat(t);return a.Z.post(n,e,{headers:{accept:"application/json","content-type":"application/json",Authorization:"Bearer ".concat(r)}}).catch((function(t){throw console.error("Error fetching data from url:",n,t.message),t}))},l=function(t,e){var r=localStorage.getItem("token"),n="".concat(c).concat(i).concat(t);return a.Z.put(n,e,{headers:{accept:"application/json","content-type":"application/json",Authorization:"Bearer ".concat(r)}}).catch((function(t){throw console.error("Error fetching data from url:",n,t.message),t}))},d=function(){var t=(0,o.Z)((0,n.Z)().mark((function t(e,r){var o,s,u;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=localStorage.getItem("token"),s="".concat(c).concat(i).concat(e),t.prev=2,t.next=5,a.Z.post(s,r,{headers:{accept:"*/*",Authorization:"Bearer ".concat(o),"Content-Type":"multipart/form-data"}});case 5:return u=t.sent,t.abrupt("return",u);case 9:throw t.prev=9,t.t0=t.catch(2),console.error("Error fetching data from url:",s,t.t0.message),t.t0;case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,r){return t.apply(this,arguments)}}(),p=function(){var t=(0,o.Z)((0,n.Z)().mark((function t(e){var r,o,s;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=localStorage.getItem("token"),o="".concat(c).concat(i).concat(e),t.prev=2,t.next=5,a.Z.get(o,{headers:{Authorization:"Bearer ".concat(r)}});case 5:return s=t.sent,t.abrupt("return",s);case 9:throw t.prev=9,t.t0=t.catch(2),console.error("Error fetching data from url:",o,t.t0.message),t.t0;case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=(0,o.Z)((0,n.Z)().mark((function t(e){var r,o,s;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=localStorage.getItem("token"),o="".concat(c).concat(i).concat(e),t.prev=2,t.next=5,a.Z.delete(o,{headers:{Authorization:"Bearer ".concat(r)}});case 5:return s=t.sent,t.abrupt("return",s);case 9:throw t.prev=9,t.t0=t.catch(2),console.error("Error fetching data from url:",o,t.t0.message),t.t0;case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}(),f=function(t){var e=localStorage.getItem("token"),r="".concat(c).concat(i).concat(t);try{return a.Z.get(r,{headers:{Authorization:"Bearer ".concat(e)},responseType:"arraybuffer"})}catch(n){throw console.error("Error fetching data from url:",r,n.message),n}},m=function(){var t=(0,o.Z)((0,n.Z)().mark((function t(e){var r,o,s;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=localStorage.getItem("token"),o="".concat(c).concat(i).concat(e),t.prev=2,t.next=5,a.Z.get(o,{headers:{Authorization:"Bearer ".concat(r)},responseType:"blob"});case 5:return s=t.sent,t.abrupt("return",s);case 9:throw t.prev=9,t.t0=t.catch(2),console.error("Error fetching data from url:",o,t.t0.message),t.t0;case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()},25302:function(t,e,r){var n=r(84395),o=r(34663),a=r(20890),c=r(94294),i=r(35352),s=r(57689),u=r(11087),l=r(80184);e.Z=function(){var t=(0,s.TH)(),e=new URLSearchParams(t.search).get("id");return(0,l.jsx)(n.Z,{position:"static",children:(0,l.jsxs)(o.Z,{children:[(0,l.jsx)(a.Z,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Photo Gallery"}),(0,l.jsx)(c.Z,{component:u.rU,to:"/album/upload?id=".concat(e),color:"secondary",variant:"contained",sx:{mr:2,backgroundColor:"#4CAF50","&:hover":{backgroundColor:"#1976d2"}},children:"Upload Photos"}),(0,l.jsx)(c.Z,{component:u.rU,to:"/album/edit?id=".concat(e),color:"secondary",variant:"contained",sx:{mr:2,backgroundColor:"#FF9800","&:hover":{backgroundColor:"#018786"}},children:"Edit Album"}),(0,l.jsx)(c.Z,{onClick:function(){window.confirm("Are you sure you want to delete the album?")?(console.log("Item deleted!"),(0,i.tX)("/albums/"+e+"/delete-album").then((function(t){console.log(t),window.location.href="/"}))):console.log("Delte operation cancelled!")},variant:"contained",sx:{mr:2,backgroundColor:"#DC143C","&:hover":{backgroundColor:"#388e3c"}},children:"Delete Album"})]})})}},55076:function(t,e,r){r.r(e);var n=r(1413),o=r(59121),a=r(15861),c=r(93433),i=r(29439),s=r(72791),u=r(8943),l=r(697),d=r(20890),p=r(35527),h=r(61889),f=r(13400),m=r(94294),g=r(84672),v=r(19658),Z=r(69596),x=r(27247),b=r(57689),j=r(25302),w=r(35352),k=r(80184);e.default=function(){var t=(0,b.TH)(),e=new URLSearchParams(t.search).get("id"),r=(0,b.s0)(),y=(0,s.useState)([]),S=(0,i.Z)(y,2),C=S[0],E=S[1],P=(0,s.useState)(!1),_=(0,i.Z)(P,2),A=_[0],T=_[1],D=(0,s.useState)(""),U=(0,i.Z)(D,2),I=U[0],R=U[1],z=(0,s.useState)(""),B=(0,i.Z)(z,2),F=B[0],H=B[1];(0,s.useEffect)((function(){localStorage.getItem("token")||(r("/login"),window.location.reload())}),[]);var L=(0,s.useCallback)((function(t){E((function(e){return[].concat((0,c.Z)(e),(0,c.Z)(t))}))}),[]),O=(0,u.uI)({onDrop:L,accept:{"image/*":[]},multiple:!0}),W=O.getRootProps,K=O.getInputProps,q=O.isDragActive,G=function(){var t=(0,a.Z)((0,o.Z)().mark((function t(){var n;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==C.length){t.next=2;break}return t.abrupt("return");case 2:n=new FormData,C.forEach((function(t){return n.append("files",t)}));try{T(!0),(0,w.eE)("/albums/"+e+"/upload-photos",n).then((function(t){console.log(t.data),r("/album/show?id="+e)})),R("Photos uploaded successfully!"),E([])}catch(o){H("Upload failed. Please try again.")}finally{T(!1)}case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,k.jsxs)("div",{children:[(0,k.jsx)(j.Z,{}),(0,k.jsx)("div",{style:{marginTop:"20px",padding:"20px"},children:(0,k.jsxs)(l.Z,{sx:{p:4},children:[(0,k.jsx)(d.Z,{variant:"h4",gutterBottom:!0,children:"Upload Photos"}),(0,k.jsxs)(p.Z,(0,n.Z)((0,n.Z)({},W()),{},{elevation:4,sx:{border:"2px dashed #90caf9",borderRadius:2,p:4,textAlign:"center",backgroundColor:q?"#f0f8ff":"#fafafa",cursor:"pointer"},children:[(0,k.jsx)("input",(0,n.Z)({},K())),(0,k.jsx)(Z.Z,{sx:{fontSize:48,color:"#90caf9"}}),(0,k.jsx)(d.Z,{variant:"body1",mt:2,children:q?"Drop the files here...":"Drag & drop photos here or click to select"})]})),C.length>0&&(0,k.jsxs)(l.Z,{sx:{mt:4},children:[(0,k.jsx)(d.Z,{variant:"h6",gutterBottom:!0,children:"Selected Photos"}),(0,k.jsx)(h.ZP,{container:!0,spacing:2,children:C.map((function(t,e){return(0,k.jsx)(h.ZP,{item:!0,xs:12,sm:4,md:3,children:(0,k.jsxs)(p.Z,{elevation:3,sx:{p:1,position:"relative",textAlign:"center"},children:[(0,k.jsx)("img",{src:URL.createObjectURL(t),alt:t.name,style:{maxWidth:"100%",height:"120px",objectFit:"cover",borderRadius:8}}),(0,k.jsx)(f.Z,{size:"small",sx:{position:"absolute",top:4,right:4},onClick:function(){return function(t){var e=(0,c.Z)(C);e.splice(t,1),E(e)}(e)},children:(0,k.jsx)(x.Z,{fontSize:"small"})}),(0,k.jsx)(d.Z,{variant:"caption",children:t.name})]})},e)}))}),(0,k.jsx)(l.Z,{mt:3,children:(0,k.jsx)(m.Z,{variant:"contained",color:"primary",onClick:G,disabled:A,children:A?"Uploading...":"Upload Photos"})})]}),(0,k.jsx)(g.Z,{open:!!I,autoHideDuration:4e3,onClose:function(){return R("")},children:(0,k.jsx)(v.Z,{severity:"success",children:I})}),(0,k.jsx)(g.Z,{open:!!F,autoHideDuration:4e3,onClose:function(){return H("")},children:(0,k.jsx)(v.Z,{severity:"error",children:F})})]})})]})}}}]);
//# sourceMappingURL=76.95d3a389.chunk.js.map