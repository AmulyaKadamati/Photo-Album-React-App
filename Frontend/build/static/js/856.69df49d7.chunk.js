"use strict";(self.webpackChunkmantis_free_react_admin_template=self.webpackChunkmantis_free_react_admin_template||[]).push([[856],{35352:function(t,e,n){n.d(e,{P5:function(){return l},Pq:function(){return h},T1:function(){return m},eE:function(){return d},kC:function(){return u},p:function(){return f},q7:function(){return s},tX:function(){return p}});var o=n(59121),r=n(15861),a=n(3902),c={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:8080",i="/api/v1",l=function(t,e){var n="".concat(c).concat(i).concat(t);return a.Z.post(n,e).catch((function(t){throw console.error("Error fetching data from url:",n),t}))},s=function(t,e){var n=localStorage.getItem("token"),o="".concat(c).concat(i).concat(t);return a.Z.post(o,e,{headers:{accept:"application/json","content-type":"application/json",Authorization:"Bearer ".concat(n)}}).catch((function(t){throw console.error("Error fetching data from url:",o,t.message),t}))},u=function(t,e){var n=localStorage.getItem("token"),o="".concat(c).concat(i).concat(t);return a.Z.put(o,e,{headers:{accept:"application/json","content-type":"application/json",Authorization:"Bearer ".concat(n)}}).catch((function(t){throw console.error("Error fetching data from url:",o,t.message),t}))},d=function(){var t=(0,r.Z)((0,o.Z)().mark((function t(e,n){var r,l,s;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=localStorage.getItem("token"),l="".concat(c).concat(i).concat(e),t.prev=2,t.next=5,a.Z.post(l,n,{headers:{accept:"*/*",Authorization:"Bearer ".concat(r),"Content-Type":"multipart/form-data"}});case 5:return s=t.sent,t.abrupt("return",s);case 9:throw t.prev=9,t.t0=t.catch(2),console.error("Error fetching data from url:",l,t.t0.message),t.t0;case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,n){return t.apply(this,arguments)}}(),h=function(){var t=(0,r.Z)((0,o.Z)().mark((function t(e){var n,r,l;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=localStorage.getItem("token"),r="".concat(c).concat(i).concat(e),t.prev=2,t.next=5,a.Z.get(r,{headers:{Authorization:"Bearer ".concat(n)}});case 5:return l=t.sent,t.abrupt("return",l);case 9:throw t.prev=9,t.t0=t.catch(2),console.error("Error fetching data from url:",r,t.t0.message),t.t0;case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=(0,r.Z)((0,o.Z)().mark((function t(e){var n,r,l;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=localStorage.getItem("token"),r="".concat(c).concat(i).concat(e),t.prev=2,t.next=5,a.Z.delete(r,{headers:{Authorization:"Bearer ".concat(n)}});case 5:return l=t.sent,t.abrupt("return",l);case 9:throw t.prev=9,t.t0=t.catch(2),console.error("Error fetching data from url:",r,t.t0.message),t.t0;case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}(),f=function(t){var e=localStorage.getItem("token"),n="".concat(c).concat(i).concat(t);try{return a.Z.get(n,{headers:{Authorization:"Bearer ".concat(e)},responseType:"arraybuffer"})}catch(o){throw console.error("Error fetching data from url:",n,o.message),o}},m=function(){var t=(0,r.Z)((0,o.Z)().mark((function t(e){var n,r,l;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=localStorage.getItem("token"),r="".concat(c).concat(i).concat(e),t.prev=2,t.next=5,a.Z.get(r,{headers:{Authorization:"Bearer ".concat(n)},responseType:"blob"});case 5:return l=t.sent,t.abrupt("return",l);case 9:throw t.prev=9,t.t0=t.catch(2),console.error("Error fetching data from url:",r,t.t0.message),t.t0;case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()},25302:function(t,e,n){var o=n(84395),r=n(34663),a=n(20890),c=n(94294),i=n(35352),l=n(57689),s=n(11087),u=n(80184);e.Z=function(){var t=(0,l.TH)(),e=new URLSearchParams(t.search).get("id");return(0,u.jsx)(o.Z,{position:"static",children:(0,u.jsxs)(r.Z,{children:[(0,u.jsx)(a.Z,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Photo Gallery"}),(0,u.jsx)(c.Z,{component:s.rU,to:"/album/upload?id=".concat(e),color:"secondary",variant:"contained",sx:{mr:2,backgroundColor:"#4CAF50","&:hover":{backgroundColor:"#1976d2"}},children:"Upload Photos"}),(0,u.jsx)(c.Z,{component:s.rU,to:"/album/edit?id=".concat(e),color:"secondary",variant:"contained",sx:{mr:2,backgroundColor:"#FF9800","&:hover":{backgroundColor:"#018786"}},children:"Edit Album"}),(0,u.jsx)(c.Z,{onClick:function(){window.confirm("Are you sure you want to delete the album?")?(console.log("Item deleted!"),(0,i.tX)("/albums/"+e+"/delete-album").then((function(t){console.log(t),window.location.href="/"}))):console.log("Delte operation cancelled!")},variant:"contained",sx:{mr:2,backgroundColor:"#DC143C","&:hover":{backgroundColor:"#388e3c"}},children:"Delete Album"})]})})}},69856:function(t,e,n){n.r(e),n.d(e,{default:function(){return k}});var o=n(72791),r=n(25302),a=n(4942),c=n(1413),i=n(29439),l=n(20890),s=n(61889),u=n(57621),d=n(42169),h=n(39504),p=n(57689),f=n(19778),m=n(35352),g=n(20068),v=n(31803),w=n(52692),x=n(94294),Z=n(80184),b=(0,v.Z)((function(t){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},modalMain:{backgroundColor:t.palette.background.paper,borderRadius:"10px",boxShadow:t.shadows[5],padding:t.spacing(2,4,3),maxHeight:"90%",maxWidth:"90%",overflow:"auto"},closeButton:{marginLeft:"auto"}}})),j=function(){var t=(0,o.useState)({}),e=(0,i.Z)(t,2),n=e[0],r=e[1],v=(0,p.TH)(),j=new URLSearchParams(v.search).get("id"),k=(0,o.useState)({}),_=(0,i.Z)(k,2),C=_[0],y=_[1],S=b(),E=(0,o.useState)(!1),A=(0,i.Z)(E,2),T=A[0],P=A[1],B=(0,o.useState)(null),D=(0,i.Z)(B,2),I=D[0],U=D[1],R=(0,o.useState)(null),L=(0,i.Z)(R,2),O=L[0],z=L[1],W=(0,o.useState)(null),F=(0,i.Z)(W,2),H=F[0],N=F[1],q=function(){P(!1)},K=function(t,e){(0,m.p)(t).then((function(t){var e=f.lW.from(new Uint8Array(t.data)).toString("base64");z(e)})),P(!0),N(t),U(e)},X=function(t){console.log(t),(0,m.T1)(t).then((function(t){console.log(t);var e=t.headers.get("Content-Disposition"),n=/filename="(.*)"/.exec(e),o=n?n[1]:"downloadedFile",r=window.URL.createObjectURL(new Blob([t.data])),a=document.createElement("a");a.href=r,a.setAttribute("download",o),document.body.appendChild(a),a.click()})).catch((function(t){console.log("Error downloadinng photo: ",t)}))};return(0,o.useEffect)((function(){(0,m.Pq)("/albums/"+j).then((function(t){y(t.data),t.data.photos.forEach((function(t){var e=t.download_link.replace("/download-photo","/download-thumbnail");(0,m.p)(e).then((function(e){var n="album_"+j+"_photo_"+t.id,o=f.lW.from(new Uint8Array(e.data)).toString("base64");console.log(o);var i={album_id:j,photo_id:t.id,name:t.name,description:t.description,content:o,download_link:t.download_link};r((function(t){return(0,c.Z)((0,c.Z)({},t),{},(0,a.Z)({},n,i))}))}))}))}))}),[j]),(0,Z.jsxs)("div",{children:[(0,Z.jsx)(w.Z,{open:T,onClose:q,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",className:S.modal,children:(0,Z.jsxs)("div",{className:S.modalMain,children:[(0,Z.jsx)("img",{src:"data:image/jpeg;base64,"+O,alt:I,style:{width:"100%",height:"auto"}}),(0,Z.jsx)(x.Z,{onClick:function(){return X(H)},children:" Download "}),(0,Z.jsxs)(x.Z,{onClick:q,className:S.closeButton,children:[" ","Close"," "]})]})}),(0,Z.jsx)(l.Z,{variant:"h4",gutterBottom:!0,children:C.name}),(0,Z.jsx)(l.Z,{variant:"subtitle1",gutterBottom:!0,children:C.description}),(0,Z.jsx)(s.ZP,{container:!0,spacing:2,children:Object.keys(n).map((function(t){return(0,Z.jsx)(s.ZP,{item:!0,xs:12,sm:6,md:4,lg:2,children:(0,Z.jsxs)(u.Z,{children:[(0,Z.jsx)(g.Z,{title:n[t].description,children:(0,Z.jsx)(d.Z,{component:"img",height:"140",image:"data:image/jpeg;base64,".concat(n[t].content),alt:n[t].description})}),(0,Z.jsxs)(h.Z,{children:[(0,Z.jsx)(g.Z,{title:n[t].description,children:(0,Z.jsx)(l.Z,{variant:"subtitle1",noWrap:!0,children:n[t].name})}),(0,Z.jsx)("a",{href:"#",onClick:function(){return K(n[t].download_link,n[t].description)},children:"View"}),"||",(0,Z.jsx)("a",{href:"/photo/edit?album_id=".concat(j,"&photo_id=").concat(n[t].photo_id,"&photo_name=").concat(n[t].name,"&photo_description=").concat(n[t].description),children:"Edit"}),"||",(0,Z.jsx)("br",{}),(0,Z.jsx)("a",{href:"#",onClick:function(){return X(n[t].download_link)},children:"Download"}),"||",(0,Z.jsx)("a",{href:"#",onClick:function(){return e=n[t].photo_id,void(window.confirm("Are you sure you want to delete the photo?")?(console.log("Item deleted!"),(0,m.tX)("/albums/"+j+"/photos/"+e+"/delete-photo").then((function(t){console.log(t),window.location.reload()}))):console.log("Delte operation cancelled!"));var e},children:"Delete"})]})]})},t)}))})]})},k=function(){return(0,Z.jsxs)("div",{children:[(0,Z.jsx)(r.Z,{}),(0,Z.jsx)("div",{style:{marginTop:"20px",padding:"20px"},children:(0,Z.jsx)(j,{})})]})}}}]);
//# sourceMappingURL=856.69df49d7.chunk.js.map