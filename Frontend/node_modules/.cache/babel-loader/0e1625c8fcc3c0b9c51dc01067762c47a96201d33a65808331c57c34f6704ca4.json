{"ast":null,"code":"import _regeneratorRuntime from\"/Users/Shared/Files From c.localized/Amulya/Photo Album React App/Frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/Shared/Files From c.localized/Amulya/Photo Album React App/Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/Shared/Files From c.localized/Amulya/Photo Album React App/Frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _slicedToArray from\"/Users/Shared/Files From c.localized/Amulya/Photo Album React App/Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/Users/Shared/Files From c.localized/Amulya/Photo Album React App/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{Button,TextField}from'@mui/material';import{fetchPutDataWithAuth}from'client/Client';import{useEffect,useState}from'react';import{useLocation,useNavigate}from'react-router-dom';// ==============================|| EDIT PHOTO FORM ||============================== //\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditPhoto=function EditPhoto(){var navigate=useNavigate();var location=useLocation();var queryParams=new URLSearchParams(location.search);var album_id=queryParams.get('album_id');var photo_id=queryParams.get('photo_id');var photo_name=queryParams.get('photo_name');var photo_desc=queryParams.get('photo_description');useEffect(function(){var isLoggedIn=localStorage.getItem('token');if(!isLoggedIn){navigate('/login');window.location.reload();}if(photo_desc=='null'){photo_desc='';}setFormData(function(prevData){return _objectSpread(_objectSpread({},prevData),{},{name:photo_name,description:photo_desc});});},[navigate]);var _useState=useState({name:'',description:''}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _useState3=useState({name:'',description:''}),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var handleInputChange=function handleInputChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setFormData(function(prevData){return _objectSpread(_objectSpread({},prevData),{},_defineProperty({},name,value));});};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var isValid,newErrors,payload;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();isValid=true;newErrors={name:'',description:''};if(!formData.name.trim()){newErrors.name='Name is required';isValid=false;}if(!formData.description.trim()){newErrors.name='Description is required';isValid=false;}setErrors(newErrors);if(isValid){payload={name:formData.name,description:formData.description};fetchPutDataWithAuth('/albums/'+album_id+'/photos/'+photo_id+'/update-photo',payload).then(function(response){console.log(response);}).catch(function(error){console.log('login error: ',error);});console.log('Form submitted: ');navigate('/');}case 7:case\"end\":return _context.stop();}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(TextField,{label:\"Name\",name:\"name\",variant:\"outlined\",margin:\"normal\",fullWidth:true,value:formData.name,onChange:handleInputChange,error:!!errors.name,helperText:errors.name}),/*#__PURE__*/_jsx(TextField,{label:\"Description\",name:\"description\",variant:\"outlined\",margin:\"normal\",fullWidth:true,value:formData.description,onChange:handleInputChange,error:!!errors.description,helperText:errors.description,multiline:true,rows:4}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",children:\"Edit Photo\"})]});};export default EditPhoto;","map":{"version":3,"names":["Button","TextField","fetchPutDataWithAuth","useEffect","useState","useLocation","useNavigate","jsx","_jsx","jsxs","_jsxs","EditPhoto","navigate","location","queryParams","URLSearchParams","search","album_id","get","photo_id","photo_name","photo_desc","isLoggedIn","localStorage","getItem","window","reload","setFormData","prevData","_objectSpread","name","description","_useState","_useState2","_slicedToArray","formData","_useState3","_useState4","errors","setErrors","handleInputChange","e","_e$target","target","value","_defineProperty","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","isValid","newErrors","payload","wrap","_callee$","_context","prev","next","preventDefault","trim","then","response","console","log","catch","error","stop","_x","apply","arguments","onSubmit","children","label","variant","margin","fullWidth","onChange","helperText","multiline","rows","type","color"],"sources":["/Users/Shared/Files From c.localized/Amulya/Photo Album React App/Frontend/src/pages/albums/editPhoto.js"],"sourcesContent":["import { Button, TextField } from '@mui/material';\r\nimport { fetchPutDataWithAuth } from 'client/Client';\r\nimport { useEffect, useState } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\n// ==============================|| EDIT PHOTO FORM ||============================== //\r\n\r\nconst EditPhoto = () => {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const queryParams = new URLSearchParams(location.search);\r\n  const album_id = queryParams.get('album_id');\r\n  const photo_id = queryParams.get('photo_id');\r\n  const photo_name = queryParams.get('photo_name');\r\n  let photo_desc = queryParams.get('photo_description');\r\n\r\n  useEffect(() => {\r\n    const isLoggedIn = localStorage.getItem('token');\r\n    if (!isLoggedIn) {\r\n      navigate('/login');\r\n      window.location.reload();\r\n    }\r\n    if (photo_desc == 'null') {\r\n      photo_desc = '';\r\n    }\r\n    setFormData((prevData) => ({ ...prevData, name: photo_name, description: photo_desc }));\r\n  }, [navigate]);\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    description: ''\r\n  });\r\n\r\n  const [errors, setErrors] = useState({\r\n    name: '',\r\n    description: ''\r\n  });\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prevData) => ({\r\n      ...prevData,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    let isValid = true;\r\n    const newErrors = { name: '', description: '' };\r\n\r\n    if (!formData.name.trim()) {\r\n      newErrors.name = 'Name is required';\r\n      isValid = false;\r\n    }\r\n    if (!formData.description.trim()) {\r\n      newErrors.name = 'Description is required';\r\n      isValid = false;\r\n    }\r\n\r\n    setErrors(newErrors);\r\n\r\n    if (isValid) {\r\n      const payload = {\r\n        name: formData.name,\r\n        description: formData.description\r\n      };\r\n      fetchPutDataWithAuth('/albums/' + album_id + '/photos/' + photo_id + '/update-photo', payload)\r\n        .then((response) => {\r\n          console.log(response);\r\n        })\r\n        .catch((error) => {\r\n          console.log('login error: ', error);\r\n        });\r\n      console.log('Form submitted: ');\r\n      navigate('/');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <TextField\r\n        label=\"Name\"\r\n        name=\"name\"\r\n        variant=\"outlined\"\r\n        margin=\"normal\"\r\n        fullWidth\r\n        value={formData.name}\r\n        onChange={handleInputChange}\r\n        error={!!errors.name}\r\n        helperText={errors.name}\r\n      />\r\n\r\n      <TextField\r\n        label=\"Description\"\r\n        name=\"description\"\r\n        variant=\"outlined\"\r\n        margin=\"normal\"\r\n        fullWidth\r\n        value={formData.description}\r\n        onChange={handleInputChange}\r\n        error={!!errors.description}\r\n        helperText={errors.description}\r\n        multiline\r\n        rows={4}\r\n      />\r\n\r\n      <Button type=\"submit\" variant=\"contained\" color=\"primary\">\r\n        Edit Photo\r\n      </Button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default EditPhoto;\r\n"],"mappings":"izBAAA,OAASA,MAAM,CAAEC,SAAS,KAAQ,eAAe,CACjD,OAASC,oBAAoB,KAAQ,eAAe,CACpD,OAASC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,WAAW,CAAEC,WAAW,KAAQ,kBAAkB,CAC3D;AAAA,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEA,GAAM,CAAAC,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAA,CAAS,CACtB,GAAM,CAAAC,QAAQ,CAAGN,WAAW,CAAC,CAAC,CAC9B,GAAM,CAAAO,QAAQ,CAAGR,WAAW,CAAC,CAAC,CAC9B,GAAM,CAAAS,WAAW,CAAG,GAAI,CAAAC,eAAe,CAACF,QAAQ,CAACG,MAAM,CAAC,CACxD,GAAM,CAAAC,QAAQ,CAAGH,WAAW,CAACI,GAAG,CAAC,UAAU,CAAC,CAC5C,GAAM,CAAAC,QAAQ,CAAGL,WAAW,CAACI,GAAG,CAAC,UAAU,CAAC,CAC5C,GAAM,CAAAE,UAAU,CAAGN,WAAW,CAACI,GAAG,CAAC,YAAY,CAAC,CAChD,GAAI,CAAAG,UAAU,CAAGP,WAAW,CAACI,GAAG,CAAC,mBAAmB,CAAC,CAErDf,SAAS,CAAC,UAAM,CACd,GAAM,CAAAmB,UAAU,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAChD,GAAI,CAACF,UAAU,CAAE,CACfV,QAAQ,CAAC,QAAQ,CAAC,CAClBa,MAAM,CAACZ,QAAQ,CAACa,MAAM,CAAC,CAAC,CAC1B,CACA,GAAIL,UAAU,EAAI,MAAM,CAAE,CACxBA,UAAU,CAAG,EAAE,CACjB,CACAM,WAAW,CAAC,SAACC,QAAQ,SAAAC,aAAA,CAAAA,aAAA,IAAWD,QAAQ,MAAEE,IAAI,CAAEV,UAAU,CAAEW,WAAW,CAAEV,UAAU,IAAG,CAAC,CACzF,CAAC,CAAE,CAACT,QAAQ,CAAC,CAAC,CACd,IAAAoB,SAAA,CAAgC5B,QAAQ,CAAC,CACvC0B,IAAI,CAAE,EAAE,CACRC,WAAW,CAAE,EACf,CAAC,CAAC,CAAAE,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAHKG,QAAQ,CAAAF,UAAA,IAAEN,WAAW,CAAAM,UAAA,IAK5B,IAAAG,UAAA,CAA4BhC,QAAQ,CAAC,CACnC0B,IAAI,CAAE,EAAE,CACRC,WAAW,CAAE,EACf,CAAC,CAAC,CAAAM,UAAA,CAAAH,cAAA,CAAAE,UAAA,IAHKE,MAAM,CAAAD,UAAA,IAAEE,SAAS,CAAAF,UAAA,IAKxB,GAAM,CAAAG,iBAAiB,CAAG,QAApB,CAAAA,iBAAiBA,CAAIC,CAAC,CAAK,CAC/B,IAAAC,SAAA,CAAwBD,CAAC,CAACE,MAAM,CAAxBb,IAAI,CAAAY,SAAA,CAAJZ,IAAI,CAAEc,KAAK,CAAAF,SAAA,CAALE,KAAK,CACnBjB,WAAW,CAAC,SAACC,QAAQ,SAAAC,aAAA,CAAAA,aAAA,IAChBD,QAAQ,KAAAiB,eAAA,IACVf,IAAI,CAAGc,KAAK,IACb,CAAC,CACL,CAAC,CAED,GAAM,CAAAE,YAAY,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAOV,CAAC,MAAAW,OAAA,CAAAC,SAAA,CAAAC,OAAA,QAAAL,mBAAA,GAAAM,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAC3BlB,CAAC,CAACmB,cAAc,CAAC,CAAC,CAEdR,OAAO,CAAG,IAAI,CACZC,SAAS,CAAG,CAAEvB,IAAI,CAAE,EAAE,CAAEC,WAAW,CAAE,EAAG,CAAC,CAE/C,GAAI,CAACI,QAAQ,CAACL,IAAI,CAAC+B,IAAI,CAAC,CAAC,CAAE,CACzBR,SAAS,CAACvB,IAAI,CAAG,kBAAkB,CACnCsB,OAAO,CAAG,KAAK,CACjB,CACA,GAAI,CAACjB,QAAQ,CAACJ,WAAW,CAAC8B,IAAI,CAAC,CAAC,CAAE,CAChCR,SAAS,CAACvB,IAAI,CAAG,yBAAyB,CAC1CsB,OAAO,CAAG,KAAK,CACjB,CAEAb,SAAS,CAACc,SAAS,CAAC,CAEpB,GAAID,OAAO,CAAE,CACLE,OAAO,CAAG,CACdxB,IAAI,CAAEK,QAAQ,CAACL,IAAI,CACnBC,WAAW,CAAEI,QAAQ,CAACJ,WACxB,CAAC,CACD7B,oBAAoB,CAAC,UAAU,CAAGe,QAAQ,CAAG,UAAU,CAAGE,QAAQ,CAAG,eAAe,CAAEmC,OAAO,CAAC,CAC3FQ,IAAI,CAAC,SAACC,QAAQ,CAAK,CAClBC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC,CACvB,CAAC,CAAC,CACDG,KAAK,CAAC,SAACC,KAAK,CAAK,CAChBH,OAAO,CAACC,GAAG,CAAC,eAAe,CAAEE,KAAK,CAAC,CACrC,CAAC,CAAC,CACJH,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC,CAC/BrD,QAAQ,CAAC,GAAG,CAAC,CACf,CAAC,wBAAA6C,QAAA,CAAAW,IAAA,MAAAjB,OAAA,GACF,kBAhCK,CAAAL,YAAYA,CAAAuB,EAAA,SAAAtB,IAAA,CAAAuB,KAAA,MAAAC,SAAA,OAgCjB,CAED,mBACE7D,KAAA,SAAM8D,QAAQ,CAAE1B,YAAa,CAAA2B,QAAA,eAC3BjE,IAAA,CAACP,SAAS,EACRyE,KAAK,CAAC,MAAM,CACZ5C,IAAI,CAAC,MAAM,CACX6C,OAAO,CAAC,UAAU,CAClBC,MAAM,CAAC,QAAQ,CACfC,SAAS,MACTjC,KAAK,CAAET,QAAQ,CAACL,IAAK,CACrBgD,QAAQ,CAAEtC,iBAAkB,CAC5B2B,KAAK,CAAE,CAAC,CAAC7B,MAAM,CAACR,IAAK,CACrBiD,UAAU,CAAEzC,MAAM,CAACR,IAAK,CACzB,CAAC,cAEFtB,IAAA,CAACP,SAAS,EACRyE,KAAK,CAAC,aAAa,CACnB5C,IAAI,CAAC,aAAa,CAClB6C,OAAO,CAAC,UAAU,CAClBC,MAAM,CAAC,QAAQ,CACfC,SAAS,MACTjC,KAAK,CAAET,QAAQ,CAACJ,WAAY,CAC5B+C,QAAQ,CAAEtC,iBAAkB,CAC5B2B,KAAK,CAAE,CAAC,CAAC7B,MAAM,CAACP,WAAY,CAC5BgD,UAAU,CAAEzC,MAAM,CAACP,WAAY,CAC/BiD,SAAS,MACTC,IAAI,CAAE,CAAE,CACT,CAAC,cAEFzE,IAAA,CAACR,MAAM,EAACkF,IAAI,CAAC,QAAQ,CAACP,OAAO,CAAC,WAAW,CAACQ,KAAK,CAAC,SAAS,CAAAV,QAAA,CAAC,YAE1D,CAAQ,CAAC,EACL,CAAC,CAEX,CAAC,CAED,cAAe,CAAA9D,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}