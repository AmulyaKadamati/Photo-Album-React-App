{"ast":null,"code":"import _regeneratorRuntime from\"/Users/Shared/Files From c.localized/Amulya/Photo Album React App/Frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/Shared/Files From c.localized/Amulya/Photo Album React App/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/Shared/Files From c.localized/Amulya/Photo Album React App/Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/Shared/Files From c.localized/Amulya/Photo Album React App/Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{React,useState}from'react';import{TextField,Container,Button}from'../../../../node_modules/@mui/material/index';import{fetchPostData}from'client/Client';import{useNavigate}from'react-router-dom';import{useEffect}from'react';// ==============================|| AUTHENTICATION - LOGIN ||============================== //\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AuthLogin=function AuthLogin(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState({email:'',password:''}),_useState6=_slicedToArray(_useState5,2),errors=_useState6[0],setErrors=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),loginError=_useState8[0],setLoginError=_useState8[1];var navigate=useNavigate();useEffect(function(){var isLoggedIn=localStorage.getItem('token');if(isLoggedIn){navigate('/');window.location.reload();}},[]);var validEmail=function validEmail(){var emailRegex=/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;return emailRegex.test(email);};var validPassword=function validPassword(){return password.length>=6&&password.length<=15;};var handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setErrors({email:'',password:''});if(validEmail()){_context.next=4;break;}setErrors(function(prevErrors){return _objectSpread(_objectSpread({},prevErrors),{},{email:'Invalid email format'});});return _context.abrupt(\"return\");case 4:if(validPassword()){_context.next=7;break;}setErrors(function(prevErrors){return _objectSpread(_objectSpread({},prevErrors),{},{password:'Password must be atleast 6 characters'});});return _context.abrupt(\"return\");case 7:fetchPostData('/auth/token',{email:email,password:password}).then(function(response){var token=response.data.token;setLoginError('');localStorage.setItem('token',token);navigate('/');window.location.reload();}).catch(function(error){console.error('Login error: ',error);setLoginError('An error occured during login');});case 8:case\"end\":return _context.stop();}},_callee);}));return function handleLogin(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Container,{component:\"main\",maxWidth:\"xs\",children:[/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",margin:\"normal\",fullWidth:true,label:\"Email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},error:!!errors.email,helperText:errors.email}),/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",margin:\"normal\",fullWidth:true,label:\"Password\",type:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},error:!!errors.password,helperText:errors.password}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",fullWidth:true,onClick:handleLogin,children:\"Login\"}),loginError&&/*#__PURE__*/_jsxs(\"p\",{style:{color:'red'},children:[\" \",loginError]})]});};export default AuthLogin;","map":{"version":3,"names":["React","useState","TextField","Container","Button","fetchPostData","useNavigate","useEffect","jsx","_jsx","jsxs","_jsxs","AuthLogin","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","_useState5","_useState6","errors","setErrors","_useState7","_useState8","loginError","setLoginError","navigate","isLoggedIn","localStorage","getItem","window","location","reload","validEmail","emailRegex","test","validPassword","length","handleLogin","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","prevErrors","_objectSpread","abrupt","then","response","token","data","setItem","catch","error","console","stop","apply","arguments","component","maxWidth","children","variant","margin","fullWidth","label","value","onChange","e","target","helperText","type","color","onClick","style"],"sources":["/Users/Shared/Files From c.localized/Amulya/Photo Album React App/Frontend/src/pages/authentication/auth-forms/AuthLogin.js"],"sourcesContent":["import { React, useState } from 'react';\nimport { TextField, Container, Button } from '../../../../node_modules/@mui/material/index';\nimport { fetchPostData } from 'client/Client';\nimport { useNavigate } from 'react-router-dom';\nimport { useEffect } from 'react';\n\n// ==============================|| AUTHENTICATION - LOGIN ||============================== //\nconst AuthLogin = () => {\n  \n\n  const [email, setEmail] = useState('');       \n  const [password, setPassword] = useState(''); \n  const [errors, setErrors] = useState({ email: '', password: '' });\n  const [loginError, setLoginError] = useState('');\n  const navigate = useNavigate();              \n\n\n  useEffect(() => {\n    const isLoggedIn = localStorage.getItem('token');\n    if (isLoggedIn) {\n      navigate('/');\n      window.location.reload();\n    }\n  }, []); \n\n  const validEmail = () => {\n  \n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return emailRegex.test(email); \n  };\n\n  const validPassword = () => {\n  \n    return password.length >= 6 && password.length <= 15;\n  };\n\n  const handleLogin = async () => {\n \n    setErrors({ email: '', password: '' });\n\n\n    if (!validEmail()) {\n    \n      setErrors((prevErrors) => ({ ...prevErrors, email: 'Invalid email format' }));\n      return;\n    }\n\n    if (!validPassword()) {\n      setErrors((prevErrors) => ({ ...prevErrors, password: 'Password must be atleast 6 characters' }));\n      return;\n    }\n\n    \n    fetchPostData('/auth/token', { email, password }) \n      .then((response) => {\n        const { token } = response.data; \n        setLoginError('');\n        localStorage.setItem('token', token); \n        navigate('/'); \n        window.location.reload();\n      })\n      .catch((error) => {\n        console.error('Login error: ', error);\n\n        setLoginError('An error occured during login');\n      });\n  };\n\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      <TextField\n        variant=\"outlined\"\n        margin=\"normal\"\n        fullWidth\n        label=\"Email\"\n        value={email}\n        onChange={(e) => setEmail(e.target.value)} \n        error={!!errors.email}\n        helperText={errors.email}\n      />\n\n      <TextField\n        variant=\"outlined\"\n        margin=\"normal\"\n        fullWidth\n        label=\"Password\"\n        type=\"password\"\n        value={password}\n        onChange={(e) => setPassword(e.target.value)} \n        error={!!errors.password}\n        helperText={errors.password}\n      />\n\n      <Button variant=\"contained\" color=\"primary\" fullWidth onClick={handleLogin}>\n        Login\n      </Button>\n\n      {loginError && <p style={{ color: 'red' }}> {loginError}</p>}\n    </Container>\n  );\n};\n\nexport default AuthLogin;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}