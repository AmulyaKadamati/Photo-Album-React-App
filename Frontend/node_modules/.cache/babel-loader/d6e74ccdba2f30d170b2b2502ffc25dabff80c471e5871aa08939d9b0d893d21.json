{"ast":null,"code":"import _regeneratorRuntime from\"/Users/Shared/Files From c.localized/Amulya/Photo Album React App/Frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/Shared/Files From c.localized/Amulya/Photo Album React App/Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/Shared/Files From c.localized/Amulya/Photo Album React App/Frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _slicedToArray from\"/Users/Shared/Files From c.localized/Amulya/Photo Album React App/Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/Users/Shared/Files From c.localized/Amulya/Photo Album React App/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{Button,TextField}from'@mui/material';import{fetchGetDataWithAuth,fetchPutDataWithAuth}from'client/Client';import{useEffect,useState}from'react';import{useLocation,useNavigate}from'react-router-dom';// ==============================|| EDIT ALBUM FORM ||============================== //\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditAlbumForm=function EditAlbumForm(){var navigate=useNavigate();var location=useLocation();var queryParams=new URLSearchParams(location.search);var album_id=queryParams.get('id');useEffect(function(){var isLoggedIn=localStorage.getItem('token');if(!isLoggedIn){navigate('/login');window.location.reload();}fetchGetDataWithAuth('/albums/'+album_id).then(function(res){if(res.data){setFormData(function(prevData){return _objectSpread(_objectSpread({},prevData),{},{name:res.data.name,description:res.data.description});});}});},[]);var _useState=useState({name:'',description:''}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _useState3=useState({name:'',description:''}),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var handleInputChange=function handleInputChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setFormData(function(prevData){return _objectSpread(_objectSpread({},prevData),{},_defineProperty({},name,value));});};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var isValid,newErrors,payload;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();isValid=true;newErrors={name:'',description:''};if(!formData.name.trim()){newErrors.name='Name is required';isValid=false;}if(!formData.description.trim()){newErrors.name='Description is required';isValid=false;}setErrors(newErrors);if(isValid){payload={name:formData.name,description:formData.description};fetchPutDataWithAuth('/albums/'+album_id+'/update-album',payload).then(function(response){console.log(response);}).catch(function(error){console.log('login error: ',error);});console.log('Form submitted: ');navigate('/');}case 7:case\"end\":return _context.stop();}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(TextField,{label:\"Name\",name:\"name\",variant:\"outlined\",margin:\"normal\",fullWidth:true,value:formData.name,onChange:handleInputChange,error:!!errors.name,helperText:errors.name}),/*#__PURE__*/_jsx(TextField,{label:\"Description\",name:\"description\",variant:\"outlined\",margin:\"normal\",fullWidth:true,value:formData.description,onChange:handleInputChange,error:!!errors.description,helperText:errors.description,multiline:true,rows:4}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",children:\"Edit Album\"})]});};export default EditAlbumForm;","map":{"version":3,"names":["Button","TextField","fetchGetDataWithAuth","fetchPutDataWithAuth","useEffect","useState","useLocation","useNavigate","jsx","_jsx","jsxs","_jsxs","EditAlbumForm","navigate","location","queryParams","URLSearchParams","search","album_id","get","isLoggedIn","localStorage","getItem","window","reload","then","res","data","setFormData","prevData","_objectSpread","name","description","_useState","_useState2","_slicedToArray","formData","_useState3","_useState4","errors","setErrors","handleInputChange","e","_e$target","target","value","_defineProperty","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","isValid","newErrors","payload","wrap","_callee$","_context","prev","next","preventDefault","trim","response","console","log","catch","error","stop","_x","apply","arguments","onSubmit","children","label","variant","margin","fullWidth","onChange","helperText","multiline","rows","type","color"],"sources":["/Users/Shared/Files From c.localized/Amulya/Photo Album React App/Frontend/src/pages/albums/editAlbum.js"],"sourcesContent":["import { Button, TextField } from '@mui/material';\r\nimport { fetchGetDataWithAuth, fetchPutDataWithAuth } from 'client/Client';\r\nimport { useEffect, useState } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\n// ==============================|| EDIT ALBUM FORM ||============================== //\r\n\r\nconst EditAlbumForm = () => {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const queryParams = new URLSearchParams(location.search);\r\n  const album_id = queryParams.get('id');\r\n\r\n  useEffect(() => {\r\n    const isLoggedIn = localStorage.getItem('token');\r\n    if (!isLoggedIn) {\r\n      navigate('/login');\r\n      window.location.reload();\r\n    }\r\n    fetchGetDataWithAuth('/albums/' + album_id).then((res) => {\r\n      if (res.data) {\r\n        setFormData((prevData) => ({ ...prevData, name: res.data.name, description: res.data.description }));\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    description: ''\r\n  });\r\n\r\n  const [errors, setErrors] = useState({\r\n    name: '',\r\n    description: ''\r\n  });\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prevData) => ({\r\n      ...prevData,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    let isValid = true;\r\n    const newErrors = { name: '', description: '' };\r\n\r\n    if (!formData.name.trim()) {\r\n      newErrors.name = 'Name is required';\r\n      isValid = false;\r\n    }\r\n    if (!formData.description.trim()) {\r\n      newErrors.name = 'Description is required';\r\n      isValid = false;\r\n    }\r\n\r\n    setErrors(newErrors);\r\n\r\n    if (isValid) {\r\n      const payload = {\r\n        name: formData.name,\r\n        description: formData.description\r\n      };\r\n      fetchPutDataWithAuth('/albums/' + album_id + '/update-album', payload)\r\n        .then((response) => {\r\n          console.log(response);\r\n        })\r\n        .catch((error) => {\r\n          console.log('login error: ', error);\r\n        });\r\n      console.log('Form submitted: ');\r\n      navigate('/');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <TextField\r\n        label=\"Name\"\r\n        name=\"name\"\r\n        variant=\"outlined\"\r\n        margin=\"normal\"\r\n        fullWidth\r\n        value={formData.name}\r\n        onChange={handleInputChange}\r\n        error={!!errors.name}\r\n        helperText={errors.name}\r\n      />\r\n\r\n      <TextField\r\n        label=\"Description\"\r\n        name=\"description\"\r\n        variant=\"outlined\"\r\n        margin=\"normal\"\r\n        fullWidth\r\n        value={formData.description}\r\n        onChange={handleInputChange}\r\n        error={!!errors.description}\r\n        helperText={errors.description}\r\n        multiline\r\n        rows={4}\r\n      />\r\n\r\n      <Button type=\"submit\" variant=\"contained\" color=\"primary\">\r\n        Edit Album\r\n      </Button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default EditAlbumForm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}